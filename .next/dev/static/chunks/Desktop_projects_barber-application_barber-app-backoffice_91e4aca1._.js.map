{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbook/Desktop/projects/barber-application/barber-app-backoffice/lib/notifications.ts"],"sourcesContent":["import api from './api';\n\nexport interface SendTestNotificationData {\n  userId: string;\n  title: string;\n  body: string;\n  data?: Record<string, string>;\n}\n\nexport const notificationsService = {\n  /**\n   * Envía una notificación de prueba a un usuario\n   */\n  async sendTestNotification(data: SendTestNotificationData): Promise<void> {\n    await api.post('/fcm-tokens/admin/test', data);\n  },\n};\n\n"],"names":[],"mappings":";;;;AAAA;;AASO,MAAM,uBAAuB;IAClC;;GAEC,GACD,MAAM,sBAAqB,IAA8B;QACvD,MAAM,uMAAG,CAAC,IAAI,CAAC,0BAA0B;IAC3C;AACF","debugId":null}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbook/Desktop/projects/barber-application/barber-app-backoffice/lib/users.ts"],"sourcesContent":["import api from './api';\n\nexport type UserRole = 'ADMIN' | 'CLIENT' | 'USER';\n\nexport interface User {\n  id: string;\n  email: string;\n  name: string;\n  phone?: string | null;\n  avatar?: string | null;\n  avatarSeed?: string | null;\n  location?: string | null;\n  country?: string | null;\n  gender?: string | null;\n  role: UserRole;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface CreateUserData {\n  email: string;\n  password: string;\n  name: string;\n  phone?: string;\n  location?: string;\n  role?: UserRole;\n  country?: string;\n  gender?: string;\n}\n\nexport interface UpdateUserData {\n  name?: string;\n  phone?: string;\n  location?: string;\n  role?: UserRole;\n  country?: string;\n  gender?: string;\n  password?: string;\n}\n\nexport interface UsersResponse {\n  success: boolean;\n  data: User[];\n  pagination: {\n    page: number;\n    limit: number;\n    total: number;\n    totalPages: number;\n  };\n}\n\nexport const usersService = {\n  async getUsers(page: number = 1, limit: number = 10, search?: string): Promise<UsersResponse> {\n    const params = new URLSearchParams({\n      page: page.toString(),\n      limit: limit.toString(),\n    });\n    \n    if (search) {\n      params.append('search', search);\n    }\n\n    const response = await api.get<UsersResponse>(`/users?${params.toString()}`);\n    return response.data;\n  },\n\n  async getUserById(id: string): Promise<User> {\n    const response = await api.get<{ success: boolean; data: User }>(`/users/${id}`);\n    return response.data.data;\n  },\n\n  async createUser(data: CreateUserData): Promise<User> {\n    const response = await api.post<{ success: boolean; data: User }>('/users', data);\n    return response.data.data;\n  },\n\n  async updateUser(id: string, data: UpdateUserData): Promise<User> {\n    const response = await api.put<{ success: boolean; data: User }>(`/users/${id}`, data);\n    return response.data.data;\n  },\n\n  async deleteUser(id: string): Promise<void> {\n    await api.delete(`/users/${id}`);\n  },\n\n  async getBarbers(): Promise<any[]> {\n    const response = await api.get<{ success: boolean; data: any[] }>('/barbers');\n    return response.data.data || [];\n  },\n};\n\n"],"names":[],"mappings":";;;;AAAA;;AAmDO,MAAM,eAAe;IAC1B,MAAM,UAAS,OAAe,CAAC,EAAE,QAAgB,EAAE,EAAE,MAAe;QAClE,MAAM,SAAS,IAAI,gBAAgB;YACjC,MAAM,KAAK,QAAQ;YACnB,OAAO,MAAM,QAAQ;QACvB;QAEA,IAAI,QAAQ;YACV,OAAO,MAAM,CAAC,UAAU;QAC1B;QAEA,MAAM,WAAW,MAAM,uMAAG,CAAC,GAAG,CAAgB,CAAC,OAAO,EAAE,OAAO,QAAQ,IAAI;QAC3E,OAAO,SAAS,IAAI;IACtB;IAEA,MAAM,aAAY,EAAU;QAC1B,MAAM,WAAW,MAAM,uMAAG,CAAC,GAAG,CAAmC,CAAC,OAAO,EAAE,IAAI;QAC/E,OAAO,SAAS,IAAI,CAAC,IAAI;IAC3B;IAEA,MAAM,YAAW,IAAoB;QACnC,MAAM,WAAW,MAAM,uMAAG,CAAC,IAAI,CAAmC,UAAU;QAC5E,OAAO,SAAS,IAAI,CAAC,IAAI;IAC3B;IAEA,MAAM,YAAW,EAAU,EAAE,IAAoB;QAC/C,MAAM,WAAW,MAAM,uMAAG,CAAC,GAAG,CAAmC,CAAC,OAAO,EAAE,IAAI,EAAE;QACjF,OAAO,SAAS,IAAI,CAAC,IAAI;IAC3B;IAEA,MAAM,YAAW,EAAU;QACzB,MAAM,uMAAG,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,IAAI;IACjC;IAEA,MAAM;QACJ,MAAM,WAAW,MAAM,uMAAG,CAAC,GAAG,CAAoC;QAClE,OAAO,SAAS,IAAI,CAAC,IAAI,IAAI,EAAE;IACjC;AACF","debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbook/Desktop/projects/barber-application/barber-app-backoffice/app/dashboard/notifications/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Bell, Send, User as UserIcon, AlertCircle, CheckCircle2 } from 'lucide-react';\nimport { notificationsService, SendTestNotificationData } from '@/lib/notifications';\nimport { usersService, type User } from '@/lib/users';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\n\nconst notificationSchema = z.object({\n  userId: z.string().min(1, 'Debes seleccionar un usuario'),\n  title: z.string().min(1, 'El título es requerido').max(100, 'El título no puede exceder 100 caracteres'),\n  body: z.string().min(1, 'El mensaje es requerido').max(500, 'El mensaje no puede exceder 500 caracteres'),\n});\n\ntype NotificationFormData = z.infer<typeof notificationSchema>;\n\nexport default function NotificationsPage() {\n  const [users, setUsers] = useState<User[]>([]);\n  const [isLoadingUsers, setIsLoadingUsers] = useState(true);\n  const [isSending, setIsSending] = useState(false);\n  const [message, setMessage] = useState<{ type: 'success' | 'error'; text: string } | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n    reset,\n    watch,\n  } = useForm<NotificationFormData>({\n    resolver: zodResolver(notificationSchema),\n    defaultValues: {\n      userId: '',\n      title: '',\n      body: '',\n    },\n  });\n\n  const selectedUserId = watch('userId');\n\n  useEffect(() => {\n    loadUsers();\n  }, []);\n\n  const loadUsers = async () => {\n    setIsLoadingUsers(true);\n    try {\n      const response = await usersService.getUsers(1, 100);\n      setUsers(response.data);\n    } catch (error) {\n      console.error('Error loading users:', error);\n      setMessage({\n        type: 'error',\n        text: 'Error al cargar usuarios',\n      });\n    } finally {\n      setIsLoadingUsers(false);\n    }\n  };\n\n  const onSubmit = async (data: NotificationFormData) => {\n    setIsSending(true);\n    setMessage(null);\n\n    try {\n      await notificationsService.sendTestNotification({\n        userId: data.userId,\n        title: data.title,\n        body: data.body,\n      });\n\n      setMessage({\n        type: 'success',\n        text: 'Notificación enviada exitosamente',\n      });\n\n      reset();\n    } catch (error: any) {\n      console.error('Error sending notification:', error);\n      setMessage({\n        type: 'error',\n        text: error.response?.data?.message || 'Error al enviar la notificación',\n      });\n    } finally {\n      setIsSending(false);\n    }\n  };\n\n  const filteredUsers = users.filter((user) => {\n    const searchLower = searchTerm.toLowerCase();\n    return (\n      user.name.toLowerCase().includes(searchLower) ||\n      user.email.toLowerCase().includes(searchLower)\n    );\n  });\n\n  const selectedUser = users.find((u) => u.id === selectedUserId);\n\n  return (\n    <div className=\"p-6 max-w-4xl mx-auto\">\n      <div className=\"mb-6\">\n        <div className=\"flex items-center gap-3 mb-2\">\n          <div className=\"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center\">\n            <Bell className=\"w-6 h-6 text-indigo-600\" />\n          </div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Notificaciones</h1>\n        </div>\n        <p className=\"text-gray-600\">Envía notificaciones de prueba a usuarios</p>\n      </div>\n\n      {/* Message Alert */}\n      {message && (\n        <div\n          className={`mb-6 p-4 rounded-lg flex items-center gap-3 ${\n            message.type === 'success'\n              ? 'bg-green-50 text-green-800 border border-green-200'\n              : 'bg-red-50 text-red-800 border border-red-200'\n          }`}\n        >\n          {message.type === 'success' ? (\n            <CheckCircle2 className=\"w-5 h-5\" />\n          ) : (\n            <AlertCircle className=\"w-5 h-5\" />\n          )}\n          <span>{message.text}</span>\n        </div>\n      )}\n\n      {/* Form */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\n        <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n          {/* User Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Usuario <span className=\"text-red-500\">*</span>\n            </label>\n            <div className=\"space-y-2\">\n              <input\n                type=\"text\"\n                placeholder=\"Buscar usuario por nombre o email...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n              />\n              <select\n                {...register('userId')}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n              >\n                <option value=\"\">Selecciona un usuario</option>\n                {isLoadingUsers ? (\n                  <option disabled>Cargando usuarios...</option>\n                ) : filteredUsers.length === 0 ? (\n                  <option disabled>No se encontraron usuarios</option>\n                ) : (\n                  filteredUsers.map((user) => (\n                    <option key={user.id} value={user.id}>\n                      {user.name} ({user.email})\n                    </option>\n                  ))\n                )}\n              </select>\n            </div>\n            {errors.userId && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.userId.message}</p>\n            )}\n            {selectedUser && (\n              <div className=\"mt-3 p-3 bg-gray-50 rounded-lg flex items-center gap-3\">\n                <div className=\"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center\">\n                  <UserIcon className=\"w-5 h-5 text-indigo-600\" />\n                </div>\n                <div>\n                  <p className=\"font-medium text-gray-900\">{selectedUser.name}</p>\n                  <p className=\"text-sm text-gray-600\">{selectedUser.email}</p>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Title */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Título <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              {...register('title')}\n              placeholder=\"Ej: Notificación de prueba\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\n            />\n            {errors.title && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.title.message}</p>\n            )}\n          </div>\n\n          {/* Body */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Mensaje <span className=\"text-red-500\">*</span>\n            </label>\n            <textarea\n              {...register('body')}\n              placeholder=\"Ej: Esta es una notificación de prueba desde el backoffice\"\n              rows={4}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none\"\n            />\n            {errors.body && (\n              <p className=\"mt-1 text-sm text-red-600\">{errors.body.message}</p>\n            )}\n          </div>\n\n          {/* Submit Button */}\n          <div className=\"flex justify-end\">\n            <button\n              type=\"submit\"\n              disabled={isSending}\n              className=\"flex items-center gap-2 px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              <Send className=\"w-5 h-5\" />\n              {isSending ? 'Enviando...' : 'Enviar Notificación'}\n            </button>\n          </div>\n        </form>\n      </div>\n\n      {/* Info Box */}\n      <div className=\"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n        <div className=\"flex items-start gap-3\">\n          <AlertCircle className=\"w-5 h-5 text-blue-600 mt-0.5\" />\n          <div className=\"text-sm text-blue-800\">\n            <p className=\"font-medium mb-1\">Información importante:</p>\n            <ul className=\"list-disc list-inside space-y-1 text-blue-700\">\n              <li>La notificación se enviará a todos los dispositivos del usuario seleccionado</li>\n              <li>El usuario debe tener la app instalada y haber iniciado sesión al menos una vez</li>\n              <li>Si el usuario no tiene tokens FCM registrados, la notificación no se enviará</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}